<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>How to Deploy a CodeIgniter 4 Project to Production - Ozar</title>
    <meta
            name="description"
            content="A confusing topic for novice CodeIgniter developers clarified for multiple scenarios on how to deploy apps to production"
    />

    <link rel="canonical" href="https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment">

    <link rel="author" href="https://www.ozar.net">
    <link rel="publisher" href="Ozar"/>


    <meta property="og:locale" content="en"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="A Step-by-Step Guide on How to Deploy CodeIgniter 4 Projects to Production"/>
    <meta property="og:description"
          content="This article describes the common steps needed for your CodeIgniter 4 project to get ready for production deployment. Although CodeIgniter Wizard is extensively mentioned throughout article, the solutions described here can be applied to almost any CodeIgniter4 project."/>
    <meta property="og:site_name" content="Ozar.net"/>

    <meta property="og:url"
          content="https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/blog/web-development-php/codeigniter/ci4-production-deployment"/>

    <meta property="og:image"
          content="https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/res/kul/web-servers-hardware-normal.jpg"/>

    <meta name="twitter:card"
          content="A confusing topic for novice CodeIgniter developers clarified for multiple scenarios on how to deploy apps to production">
    <meta name="twitter:image"
          content="https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/res/kul/web-servers-hardware-normal.jpg">
    <meta name="twitter:domain" content="ozar.net">
    <meta name="twitter:site" content="@ozarnet">
    <meta name="twitter:creator" content="@skyhan">

    <meta name="twitter:url"
          content="https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment">
    <meta name="twitter:title" content="How to Deploy a CodeIgniter 4 Project to Production">
    <meta name="twitter:description"
          content="This article describes the common steps needed for your CodeIgniter 4 project to get ready for production deployment. Although CodeIgniter Wizard is extensively mentioned throughout article, the solutions described here can be applied to almost any CodeIgniter4 project.">

    <!-- Pico.css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"/>

    <!-- Custom styles for this example -->
    <link rel="stylesheet" href="/ozarnetstaticweb/stil/arasayfa.css?v=1712505134"/>

    <!-- Render additional css -->
    <link rel="stylesheet" href="/ozarnetstaticweb/assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/ozarnetstaticweb/assets/css/goblog.css?v=1.1">

    <style id='block-code-inline-css'>
        .preformatted-block {
            white-space: pre-wrap;
            margin-bottom: 1em;
            font-family: Menlo, Consolas, monaco, monospace;
            font-size: 14px;
        }

        .preformatted-block.has-background {
            padding: 1.25em 2.375em;
        }

        .code-block code {
            display: block;
            font-family: inherit;
            overflow-wrap: break-word;
            white-space: pre-wrap;
            margin-bottom: 1em;
        }

        .code-block {
            border: 1px solid #ccc;
            border-radius: 6px;
            font-family: Menlo, Consolas, monaco, monospace;
            font-size: 14px;
            padding: .8em 0.5em;
        }

        .youtube-video {
            aspect-ratio: 16 / 9;
            width: 100%;
        }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2035820168336712"
            crossorigin="anonymous"></script>

    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Blog",
                    "item": "https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/blog"
                },
                {
                    "@type": "ListItem",
                    "position": 3,
                    "name": "PHP Category",
                    "item": "https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/blog/web-development-php"
                },
                {
                    "@type": "ListItem",
                    "position": 4,
                    "name": "CodeIgniter Category",
                    "item": "https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/blog/web-development-php/codeigniter"
                },
                {
                    "@type": "ListItem",
                    "position": 5,
                    "name": "Deploying Your CI 4 app to Production",
                    "item": "https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/blog/web-development-php/codeigniter/ci4-production-deployment"
                }
            ]
        }
    </script>

    <script type="application/ld+json">{
        "@context": "https:\/\/schema.org",
        "@graph": [
            {
                "@type": "Organization"
            },
            {
                "@type": "WebSite",
                "about": "Ozar is a software development and services provider founded by Gökhan Ozar with expertise in Java, .NET and Apple platforms respectively, using programming languages such as Java, C#, Swift, PHP, JavaScript and Python.\nOzar provides digital products, software services, training, eLearning course-ware in programming, IT, language skills improvement as well as translation services.",
                "name": "Ozar - Digital Products and Services Website",
                "alternateName": "Ozar.net Website",
                "url": "https:\/\/www.ozar.net",
                "headline": "Tech-savvy becomes you with Ozar products and services",
                "dateModified": "2023-07-24T23:43:06+0300",
                "inLanguage": "en",
                "publisher": "Ozar",
                "provider": "Ozar.net",
                "copyrightHolder": "Ozar",
                "copyrightYear": 2020,
                "sdPublisher": {
                    "@type": "Organization",
                    "name": "Ozar",
                    "legalName": "Ozar",
                    "alternateName": "Ozar.net",
                    "description": "Ozar is a software development and services provider founded by Gökhan Ozar with expertise in Java, .NET and Apple platforms respectively, using programming languages such as Java, C#, Swift, PHP, JavaScript and Python.\nOzar provides digital products, software services, training, eLearning course-ware in programming, IT, language skills improvement as well as translation services.",
                    "url": "https:\/\/www.ozar.net",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https:\/\/www.ozar.net\/res\/ozar-logo.png",
                        "name": "Ozar Logo",
                        "image": "https:\/\/www.ozar.net\/res\/ozar-logo.png",
                        "@id": "https:\/\/www.ozar.net\/res\/ozar-logo.png"
                    },
                    "image": "https:\/\/www.ozar.net\/res\/about-Ozar-1200x630.jpg",
                    "disambiguatingDescription": "Ozar is a software development and services provider founded by Gökhan Ozar with expertise in Java, .NET and Apple platforms respectively, using programming languages such as Java, C#, Swift, PHP, JavaScript and Python.",
                    "knowsAbout": "Web development, web security, SEO, Development on Apple Platform as well as Java, .NET, C#, Swift, PHP, JavaScript, Python",
                    "areaServed": "Worldwide",
                    "foundingDate": 2020,
                    "founder": {
                        "@type": "Person",
                        "name": "Gökhan Ozar",
                        "@id": "https:\/\/gokhan.ozar.net"
                    },
                    "sameAs": [
                        "https:\/\/twitter.com\/ozarnet"
                    ],
                    "@id": "https:\/\/www.ozar.net#initiative"
                },
                "disambiguatingDescription": "Ozar is a software development and services provider founded by Gökhan Ozar with expertise in Java, .NET and Apple platforms respectively, using programming languages such as Java, C#, Swift, PHP, JavaScript and Python.",
                "sdDatePublished": "2023-07-24T23:43:06+0300",
                "sameAs": "https:\/\/www.ozar.net",
                "audience": {
                    "@type": "Audience",
                    "name": "PHP developers",
                    "alternateName": "CodeIgniter users",
                    "audienceType": "Web developer"
                },
                "@id": "https:\/\/www.ozar.net#website"
            },
            {
                "@type": "WebPage",
                "url": "https:\/\/www.ozar.net\/blog\/web-development-php\/codeigniter\/ci4-production-deployment",
                "name": "How to Deploy a CodeIgniter 4 Project to Production",
                "description": "This article describes the common steps needed for your CodeIgniter 4 project to get ready for production deployment. Although CodeIgniter Wizard is extensively mentioned throughout article, the solutions described here can be applied to almost any CodeIgniter4 project.",
                "isPartOf": "https:\/\/www.ozar.net#website",
                "dateModified": "2023-07-24T21:17:18+0300",
                "inLanguage": "en",
                "potentialAction": {
                    "@type": "ReadAction",
                    "target": {
                        "@type": "EntryPoint",
                        "name": "url",
                        "url": "https:\/\/www.ozar.net\/blog\/web-development-php\/codeigniter\/ci4-production-deployment"
                    }
                },
                "image": "https:\/\/www.ozar.net\/res\/kul\/web-servers-hardware-large.jpg",
                "keywords": "CodeIgniter, CodeIgniter4, deployment, production, composer, .env, public",
                "@id": "https:\/\/www.ozar.net\/blog\/web-development-php\/codeigniter\/ci4-production-deployment#webpage"
            },
            {
                "@type": "BlogPosting",
                "author": "Ozar",
                "datePublished": "2022-05-05T00:00:00+0300",
                "dateModified": "2023-07-24T21:17:18+0300",
                "headline": "How to Deploy a CodeIgniter 4 Project to Production",
                "image": "https:\/\/www.ozar.net\/res\/kul\/web-servers-hardware-large.jpg",
                "publisher": {
                    "@type": "Organization",
                    "name": "Ozar",
                    "legalName": "Ozar",
                    "alternateName": "Ozar.net",
                    "description": "Ozar is a software development and services provider founded by Gökhan Ozar with expertise in Java, .NET and Apple platforms respectively, using programming languages such as Java, C#, Swift, PHP, JavaScript and Python.\nOzar provides digital products, software services, training, eLearning course-ware in programming, IT, language skills improvement as well as translation services.",
                    "url": "https:\/\/www.ozar.net",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https:\/\/www.ozar.net\/res\/ozar-logo.png",
                        "name": "Ozar Logo",
                        "image": "https:\/\/www.ozar.net\/res\/ozar-logo.png",
                        "@id": "https:\/\/www.ozar.net\/res\/ozar-logo.png"
                    },
                    "image": "https:\/\/www.ozar.net\/res\/about-Ozar-1200x630.jpg",
                    "disambiguatingDescription": "Ozar is a software development and services provider founded by Gökhan Ozar with expertise in Java, .NET and Apple platforms respectively, using programming languages such as Java, C#, Swift, PHP, JavaScript and Python.",
                    "knowsAbout": "Web development, web security, SEO, Development on Apple Platform as well as Java, .NET, C#, Swift, PHP, JavaScript, Python",
                    "areaServed": "Worldwide",
                    "foundingDate": 2020,
                    "founder": {
                        "@type": "Person",
                        "name": "Gökhan Ozar",
                        "@id": "https:\/\/gokhan.ozar.net"
                    },
                    "sameAs": [
                        "https:\/\/twitter.com\/ozarnet"
                    ],
                    "@id": "https:\/\/www.ozar.net#initiative"
                },
                "mainEntityOfPage": {
                    "@type": "WebPage",
                    "url": "https:\/\/www.ozar.net\/blog\/web-development-php\/codeigniter\/ci4-production-deployment",
                    "name": "How to Deploy a CodeIgniter 4 Project to Production",
                    "description": "This article describes the common steps needed for your CodeIgniter 4 project to get ready for production deployment. Although CodeIgniter Wizard is extensively mentioned throughout article, the solutions described here can be applied to almost any CodeIgniter4 project.",
                    "isPartOf": "https:\/\/www.ozar.net#website",
                    "dateModified": "2023-07-24T21:17:18+0300",
                    "inLanguage": "en",
                    "potentialAction": {
                        "@type": "ReadAction",
                        "target": {
                            "@type": "EntryPoint",
                            "name": "url",
                            "url": "https:\/\/www.ozar.net\/blog\/web-development-php\/codeigniter\/ci4-production-deployment"
                        }
                    },
                    "image": "https:\/\/www.ozar.net\/res\/kul\/web-servers-hardware-large.jpg",
                    "keywords": "CodeIgniter, CodeIgniter4, deployment, production, composer, .env, public",
                    "@id": "https:\/\/www.ozar.net\/blog\/web-development-php\/codeigniter\/ci4-production-deployment#webpage"
                },
                "description": "This article describes the common steps needed for your CodeIgniter 4 project to get ready for production deployment. Although CodeIgniter Wizard is extensively mentioned throughout article, the solutions described here can be applied to almost any CodeIgniter4 project.",
                "about": "This article describes the common steps needed for your CodeIgniter 4 project to get ready for production deployment. Although CodeIgniter Wizard is extensively mentioned throughout article, the solutions described here can be applied to almost any CodeIgniter4 project.\r\nCodeIgniter Wizard creates Composer-based CI4 projects with the base framework libraries and files residing in the vendor directory and it includes the .env, composer.json and composer.lock files in the root of …",
                "url": "https:\/\/www.ozar.net\/blog\/web-development-php\/codeigniter\/ci4-production-deployment\/blog\/web-development-php\/codeigniter\/ci4-production-deployment"
            }
        ]
    }</script>
</head>

<body>
<!-- Hero -->
<div class="hero" data-theme="dark">
    <nav class="container-fluid flex-nav">

        <ul id="logo-container">
            <li id="ozarLogoHeading" class="logo">
                <a href="/ozarnetstaticweb/" class="contrast" title="Ozar Home Page"><span>Ozar</span></a>
            </li>
        </ul>

        <div id="nav-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <ul id="nav-links">
            <li>
                <a href="/ozarnetstaticweb/">
                    Home
                </a>
            </li>
            <li>
                <a href="/ozarnetstaticweb/about">
                    About
                </a>
            </li>
            <li>
                <a href="/ozarnetstaticweb/products">
                    Products
                </a>
            </li>
            <li>
                <a href="/ozarnetstaticweb/blog">
                    Blog
                </a>
            </li>
            <li>
                <a href="/ozarnetstaticweb/contact">
                    Contact
                </a>
            </li>

            <li>
                <details role="list" dir="rtl">
                    <summary aria-haspopup="listbox" role="link" class="contrast">Dil</summary>
                    <ul role="listbox">
                        <li>
                            English
                        </li>
                        <li>
                            <a href="/ozarnetstaticweb/tr" title="view_this_website_inTürkçe ">
                                Türkçe </a>
                        </li>
                    </ul>
                </details>
            </li>
            <li>
                <details role="list" dir="rtl">
                    <summary aria-haspopup="listbox" role="link" class="contrast">Theme</summary>
                    <ul role="listbox">
                        <li><a href="#" data-theme-switcher="auto">Auto</a></li>
                        <li><a href="#" data-theme-switcher="light">Light</a></li>
                        <li><a href="#" data-theme-switcher="dark">Dark</a></li>
                    </ul>
                </details>
            </li>
        </ul>

    </nav>
    <header class="container">
        <hgroup>
            <!-- <h1>Ozar</h1> -->
            <h1>How to Deploy a CodeIgniter 4 Project to Production</h1>
            <h2>Taking Your CodeIgniter 4 App Live: A Detailed Guide</h2>
        </hgroup>
    </header>

</div>
<!-- ./ Hero --><!-- Main -->
<main class="container" data-layout="subPageRightSidebarLayout">
    <div class="grid">

        <section>


            <!-- Content -->
            <article class="box post" data-cache-id="blog__web_development_php__codeigniter__ci4_production_deployment">
                <a href="#" class="image featured">
                    <img href="/ozarnetstaticweb/res/kul/web-servers-hardware-large.jpg" alt="Web Server Hardware"/>
                </a>
                <header>

                    <p>
                        <b>A confusing topic for novice CodeIgniter developers clarified for multiple scenarios on how
                            to deploy apps to production</b>
                    </p>
                    <small style="font-size: medium">
                        <i>
                            published on
                            <span id="articleDate">
                                5 May 2022                            </span>
                        </i>
                        in <span class="blog-cat-pill">CodeIgniter</span><span
                            class="blog-cat-pill"> Web Development</span><span class="blog-cat-pill"> PHP</span>
                    </small>
                </header>

                <section>
                    <small style="font-size: medium"><em>Updated on 30 May 2023</em> </small><br><br>
                    <h3>Introduction</h3>
                    <p>This article describes the common steps needed for your CodeIgniter 4 project to get ready for
                        production deployment. Although CodeIgniter Wizard is extensively mentioned throughout the
                        article, the solutions described here can be applied to almost any CodeIgniter4 project.</p>
                    <p><em><a href="/ozarnetstaticweb/products/codeigniterwizard/?r=OzarNetBlog">CodeIgniter Wizard</a></em>
                        creates <em>Composer</em>-based CI4 projects with the base framework libraries and files
                        residing in the vendor directory and it includes the .env, composer.json and composer.lock files
                        in the root of the project so that you can not only change the essential project configuration
                        by simply editing the .env file in an editor, but also open the project root in a command-line
                        terminal (or &ldquo;Command Prompt&rdquo; in Windows) and run composer commands.</p>
                    <p>The convenience of PHP composer-based projects proves itself when it comes to adding 3rd-party
                        libraries compatible with your project&rsquo;s version or simply when you want to instantly
                        change the version of the CodeIgniter framework &ndash; typically for upgrading it to the latest
                        version with <a href="https://codeigniter.com/user_guide/installation/upgrade_420.html"
                                        data-type="URL"
                                        data-id="https://codeigniter.com/user_guide/installation/upgrade_420.html">as
                            fewest hassles as possible</a>.</p>
                    <p>The easiest and simplest way is, of course, upgrading your project with CodeIgniter Wizard,
                        however, as it will save the labor of doing some manual work before running composer update like
                        the one you need to do <a
                                href="https://codeigniter.com/user_guide/installation/upgrade_420.html">when upgrading
                            from 4.1.9 to 4.2.0</a>.</p>

                    <h4>Video Tutorial Demonstrating the Process on Shared Hosting</h4>
                    <p><I>Keep scrolling below unless you'd prefer to watch a video tutorial demonstrating the process
                        on a shared hosting plan based on cPanel.</I></p>
                    <div class="embed-responsive embed-responsive-16by9">
                        <iframe width="600" height="340" class="youtube-video"
                                src="https://www.youtube-nocookie.com/embed/828LO00e7hk" title="YouTube video player"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                allowfullscreen></iframe>
                    </div>
                    <br>
                    <h3>Configure your .env file for production</h3>
                    <p>By default the environment variable named CI_ENVIRONMENT in the ENVIRONMENT section of your .env
                        file is set to &ldquo;development&rdquo; .</p>
                    <pre class="preformatted-block">#----------------------------------------------------------
# ENVIRONMENT
#----------------------------------------------------------

CI_ENVIRONMENT = development</pre>
                    <p>For easy switching between development and production, you may want to comment the line for
                        development and insert a new line like so:</p>
                    <pre class="preformatted-block"># CI_ENVIRONMENT = development
CI_ENVIRONMENT = production</pre>
                    <p>Neither using Composer, nor CodeIgniter Wizard? You should be all set if you had developed your
                        project in a virtualized host environment, or Nginx or Vagrant <a
                                href="https://codeigniter4.github.io/CodeIgniter4/installation/running.html">as
                            described here</a>. You can safely ignore or skip the next section if your CodeIgniter
                        project is not composer-based.</p>
                    <h3>Use Composer to remove development dependencies</h3>
                    <p>This step applies only to CodeIgniter4 projects that were created using PHP Composer, or any
                        project created with <em>CodeIgniter Wizard 1.5</em> or later.</p>
                    <p>Open the root directory (of a copy) of your project in a command line terminal, and then run the
                        following command:</p>
                    <pre class="code-block"><code>composer update --no-dev</code></pre>
                    <p>This, of course, requires you have PHP Composer installed, and it will remove a bulk of files
                        that would only be needed to facilitate development (such as PHPUnit, etc).</p>
                    <h3>Upload the project (folder) to the production web server</h3>
                    <p>Assuming that you are not using an automatic deployment from a version control system, you have
                        yet to upload the project files to the production web server manually via FTP or the &ldquo;File
                        Manager&rdquo; of your hosting server&rsquo;s cPanel, for example. Thanks to HTTP/2, uploading
                        hundreds of files to a remote web server should only take a few minutes (if not seconds).</p>
                    <p>Web server&rsquo;s public html directory (which might be named as one of public_html, htdocs, www
                        or wwwroot) should be your CodeIgniter4 project&rsquo;s public directory.</p>
                    <pre class="preformatted-block">app/
    Config/
    Controllers/
    Database/
    Filters/
    Helpers/
    Language/
    Libraries/
    Models/
    ThirdParty/
    Views/</pre>
                    <pre class="preformatted-block"><mark style="background-color: #ffe2c7;" class="has-inline-color">public/</mark> &lt;- public_html or htdocs or www should point here
           or vice versa
vendor/ (if composer-based, otherwise: system/)
writable/</pre>
                    <p>If you have a dedicated server or VPS (or your own server instance in the Cloud), the public
                        directory should be the public folder one-level below your project directory, not the entire
                        directory containing /app and /writable directories. On the other hand, if you are using shared
                        hosting, follow the steps in the next paragraph.</p>
                    <h4>Deploying your CodeIgniter4 project to a shared hosting server</h4>
                    <p>If you have a shared hosting account, the root directory you could access would typically look
                        like the following:</p>
                    <pre class="preformatted-block">/home/youraccountname/</pre>
                    <p>and the public html or htdocs folder would be at:</p>
                    <p class="preformatted-block">/home/youraccountname/public_html<br>or<br>/home/youraccountname/www
                        (symbolic link to public_html)</p>
                    <h5>Using shared hosting for a single web project (or the first one for the first time)</h5>
                    <p>If you are using the entire shared hosting account for a single web project or this is the first
                        time you are setting up anything in this account, follow the steps below:</p>
                    <p>First, upload everything inside your CodeIgniter project&rsquo;s <em>public</em> folder to <em>public_html</em>
                        or <em>www</em> directory (they would be pointing to the same path in the file system) on the
                        server.</p>
                    <p>Next, upload your CodeIgniter project folder (excluding the public folder) to
                        /home/youraccount/.</p>
                    <p>Then, simply skip to the &ldquo;Final Step&rdquo;.</p>
                    <h5>Using shared hosting for multiple websites and/or projects</h5>
                    <p>If you are using multiple websites and/or web apps on a single shared hosting account, create
                        either a new add-on domain or a subdomain dedicated solely to your CodeIgniter project, and make
                        sure its public htdocs directory is different than that of other websites or web applications
                        you have setup in the hosting account. That is, if public_html (or its equivalent) is used for
                        an existing site or web app, the domain for this CI4 project should have its public directory
                        should be at a different location. If you haven&rsquo;t set up anything yet on this shared
                        hosting account before, you can go back to the previous sub-title and apply the instructions
                        there, and later for your next projects you can apply the instructions in this section.</p>
                    <p>Now, assuming existing public_html (or its equivalent whatever it is called) is already used for
                        another website or app, create a new domain and have it point to
                        /home/youraccount/public_html_other/<em>yourcodeigniter4projectpublic</em>/ as its public docs
                        directory (so that you can keep adding new projects under &ldquo;/home/youraccount/public_html_other/&rdquo;
                        with different folder names) .</p>
                    <p>Next, upload the contents of CodeIgniter project&rsquo;s <em>public</em> folder to
                        /home/youraccount/public_html_other/yourcodeigniter4projectpublic/.</p>
                    <p>Then, create a new directory in /home/youraccount/ and name it &lsquo;ci4projects&rsquo;.</p>
                    <p>And then, upload your CodeIgniter project folder (excluding the public folder) to
                        /home/youraccount/ci4projs/.</p>
                    <p>If you have done this correctly, a directory structure similar to the following should be
                        formed:</p>
                    <pre class="preformatted-block">/home/youraccount/ci4apps/yourci4project/
/home/youraccount/ci4apps/yourci4project/app
/home/youraccount/ci4apps/yourci4project/vendor (or
/home/youraccount/ci4apps/yourci4project/system    )
/home/youraccount/ci4apps/yourci4project/writable</pre>
                    <p>Then edit the index.php file inside /home/youraccountname/public_html (in which case the fully
                        qualified file path would be /home/youraccountname/public_html/index.php )</p>
                    <p>Find the following lines:</p>
                    <pre class="code-block"><code>// Load our paths config file
// This is the line that might need to be changed, depending on your folder structure.
require FCPATH . '../app/Config/Paths.php';
// ^^^ Change this line if you move your application folder</code></pre>
                    <p>Change</p>
                    <pre class="code-block"><code>require FCPATH . '../app/Config/Paths.php';</code></pre>
                    <p>to:</p>
                    <pre class="code-block"><code>$pathsConfig = FCPATH . '../../ci4apps/yourci4project/app/Config/Paths.php';</code></pre>
                    <p>Note the URL of this domain (or subdomain) as you will need it in the final step, which is
                        next.</p>
                    <h5>The Final Step</h5>
                    <p>Your domain name which would consequently affect your web app address should be evident depending
                        on how you use your hosting server.</p>
                    <p>If you are using multiple websites and/or web apps on a single shared hosting account, it is
                        assumed in the context of the how-to&rsquo;s of this article that you have determined the
                        correct domains and the correct URLs pertaining to them by now.</p>
                    <p>As a final step, edit the .env file of the CodeIgniter project, changing the line</p>
                    <pre class="preformatted-block">app.baseURL = 'http://localhost:8080'</pre>
                    to
                    <pre class="preformatted-block">app.baseURL = 'http://whatever.your.domain.is'</pre>
                    <p>and you are done!</p>
                    <p>When a user visits &ldquo;http://whatever.your.domain.is&rdquo;, they will see what&rsquo;s
                        displayed by the home controller.</p>
                    <p>For shared hosting, Ozar endorses <a href="http://www.a2hosting.com/refer/391325" target="_blank"
                                                            title="A2 Hosting" rel="noopener"><strong>A2
                        Hosting</strong></a> that offers amazing features in addition to cPanel:</p>
                    <ul>
                        <li>Drag and drop file manager to upload and decompress large archives on the server.</li>
                        <li>Unlimited free SSL certificates (Let&rsquo;s Encrypt) on most plans</li>
                        <li>Your own Git-based remote version repository (you can commit cpanel.yaml files to directly
                            publish your PHP project from your own remote repo!)
                        </li>
                        <li>Ability to run NodeJS, Python and Ruby apps via &lsquo;Passenger&rsquo;.</li>
                        <li>A couple of different automatic backup mechanisms for your files and databases.</li>
                        <li>Support for MySQL/MariaDB or Postgresql with schema sizes as big as 5GB unlike most shared
                            hosting servers.
                        </li>
                        <li>A user-friendly GUI tool for editing DNS records of your domains.</li>
                        <li>Memcached server and a couple of other modern caching tools</li>
                        <li>And more&hellip;</li>
                    </ul>
                    <p>
                        In conclusion, deploying your CodeIgniter 4 project to production can seem a daunting task for
                        beginners, but with the help of this comprehensive guide, the process becomes accessible and
                        manageable. From configuring your .env file to using Composer for handling dependencies and
                        setting up your project on a shared hosting server, each step is essential in ensuring a
                        seamless deployment. Keep in mind that the use of tools like CodeIgniter Wizard can simplify
                        your upgrade process, and shared hosting services such as A2 Hosting can provide additional
                        features that can further streamline your work. It's important to remember that like any
                        development task, successful deployment relies on attention to detail, understanding of your
                        tools, and patience. With these tips and instructions at your disposal, you're now ready to take
                        your CodeIgniter 4 project to the production stage. Happy coding and prod deployment!
                    </p>
                </section>


                <section style="margin-bottom: 20px;">
                    <header>
                        <h5>Share this on</h5>
                    </header>
                    <div class="post-share" style="padding-bottom: 30px;">
                        <!--include Social Share -->
                        <ul class="share-box">
                            <li class="share-li-lg">
                                <a href="javascript:void(0)"
                                   onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment', 'Share This Post', 'width=640,height=450');return false"
                                   class="social-btn-lg facebook">
                                    <i class="fab fa-facebook-square"></i>
                                    <span>facebook</span>
                                </a>
                            </li>

                            <li class="share-li-lg">
                                <a href="javascript:void(0)"
                                   onclick="window.open('https://twitter.com/share?url=https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment&amp;text=How to Deploy a CodeIgniter 4 Project to Production', 'Share This Post', 'width=640,height=450');return false"
                                   class="social-btn-lg twitter">
                                    <i class="fab fa-twitter"></i>
                                    <span>twitter</span>
                                </a>
                            </li>
                            <li class="share-li-sm">
                                <a href="javascript:void(0)"
                                   onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment', 'Share This Post', 'width=640,height=450');return false"
                                   class="social-btn-sm facebook">
                                    <i class="fab fa-facebook"></i>
                                </a>
                            </li>

                            <li class="share-li-sm">
                                <a href="javascript:void(0)"
                                   onclick="window.open('https://twitter.com/share?url=https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment&amp;text=How to Deploy a CodeIgniter 4 Project to Production', 'Share This Post', 'width=640,height=450');return false"
                                   class="social-btn-sm twitter">
                                    <i class="fab fa-twitter"></i>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)"
                                   onclick="window.open('https://www.linkedin.com/sharing/share-offsite/?url=https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment&amp;title=How+to+Deploy+a+CodeIgniter+4+Project+to+Production', 'Share This Post', 'width=720,height=450');return false;"
                                   class="social-btn-sm linkedin">
                                    <i class="fab fa-linkedin"></i>
                                </a>
                            </li>
                            <li class="li-whatsapp">
                                <a href="https://api.whatsapp.com/send?text=How to Deploy a CodeIgniter 4 Project to Production - https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment"
                                   class="social-btn-sm whatsapp"
                                   target="_blank">
                                    <i class="fab fa-whatsapp"></i>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)"
                                   onclick="window.open('http://pinterest.com/pin/create/button/?url=https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment&amp;media=https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deploymentres/kul/web-servers-hardware-large.jpg', 'Share This Post', 'width=640,height=450');return false"
                                   class="social-btn-sm pinterest">
                                    <i class="fab fa-pinterest"></i>
                                </a>
                            </li>

                            <li>
                                <a href="javascript:void(0)" id="printArticle" class="social-btn-sm btn-print">
                                    <i class="fas fa-print"></i>
                                </a>
                            </li>

                        </ul>


                    </div>
                </section>
                <section id="comments">
                    <h3>Comments</h3>
                    <h4>What others think</h4>
                    <div id="response" class="comment-response">
                        <p>Commenting for new users is temporarily disabled.</p>
                    </div>

                    <div id="userComments" class="comments" style="margin-top: 2em;" data-current-pid="">
                        <ul class="comment-list">
                            <li id="yorum_11" class="row">
                                <div class="comment-left">
                                    <img src="https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/res/img/jenerikuye.png.jpg"
                                         alt="Coolars" class="user-icon">

                                </div>
                                <div class="comment-right comment-text">
                                    <h5 class="commenter-name">Coolars</h5> Great walkthrough of the CodeIgniter 4
                                    production deployment process! Your explanations were clear and easy to understand,
                                    which made the whole process less intimidating. The recommendation for A2 Hosting
                                    seems solid with all the advanced features you mentioned. However, I&#039;m
                                    wondering if you have any advice for troubleshooting common issues during
                                    deployment? For instance, what would be your go-to strategies when facing database
                                    connection errors or problems with file permissions?
                                    <div id="commentFooter11" class="row comment-footer">
                                        <div class="col-3">
                                            <small class="comment-date">May 2023</small>
                                        </div>
                                        <div class="col-3">
                                            <a href="javascript:void(0)" class="btn-reply"
                                               onclick="bringReplyFormForComment('11');"><i class="fas fa-reply"></i>
                                                Reply</a>
                                        </div>
                                    </div>
                                    <div id="commentReply11" class="comment-reply">
                                    </div>
                                    <div id="userComments11" class="comments" style="margin-top: 2em;"
                                         data-current-pid="11">
                                        <ul class="comment-list">
                                            <li id="yorum_12" class="row">
                                                <div class="sub-comment-left">
                                                    <img src="https://www.ozar.net/blog/web-development-php/codeigniter/ci4-production-deployment/res/img/jenerikuye.png.jpg"
                                                         alt="Ozar" class="user-icon">

                                                </div>
                                                <div class="sub-comment-right comment-text">
                                                    <h5 class="commenter-name">Ozar</h5> Thank you for your kind words
                                                    and insightful questions! Troubleshooting deployment issues is a
                                                    vast topic, and strategies can differ based on the issue at hand.

                                                    1 Database Connection Errors: These are commonly due to incorrect
                                                    credentials in your .env or database configuration file. Always
                                                    ensure that your database credentials (hostname, username, password,
                                                    database name) are correctly specified. Sometimes, the problem might
                                                    be from the server itself, so checking the server&#039;s error logs
                                                    can be helpful. If you&#039;re migrating a database, make sure the
                                                    database schema is properly set up in the production environment.

                                                    2 File Permissions: Problems with file permissions are usually
                                                    related to the &quot;writable&quot; directory in CodeIgniter 4. This
                                                    folder must be writable by the web server. Depending on the server
                                                    setup, the permission could be set to 755 or 777, though 777 is less
                                                    secure. If you&#039;re deploying on a Unix-based system, you can set
                                                    the permissions via terminal using &#039;chmod&#039; command. On
                                                    shared hosting, you can typically adjust these settings through the
                                                    control panel provided by your hosting service.

                                                    These are general strategies, and specific issues might require
                                                    further troubleshooting. Also, keep an eye on the logs, as they can
                                                    provide valuable insights about what&#039;s going wrong. In the
                                                    context of deployment, a clear understanding of your server
                                                    environment and how it interacts with your application is essential.
                                                    <div id="commentFooter12" class="row comment-footer">
                                                        <div class="col-3">
                                                            <small class="comment-date">May 2023</small>
                                                        </div>
                                                        <div class="col-3">
                                                            <a href="javascript:void(0)" class="btn-reply"
                                                               onclick="bringReplyFormForComment('12');"><i
                                                                    class="fas fa-reply"></i> Reply</a>
                                                        </div>
                                                    </div>
                                                    <div id="commentReply12" class="comment-reply">
                                                    </div>
                                                </div>

                                            </li>
                                        </ul>
                                    </div><!--//#userComments -->                                                </div>

                            </li>
                        </ul>
                    </div><!--//#userComments -->                            </section>

            </article>

            <script async
                    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2035820168336712"
                    crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-format="autorelaxed"
                 data-ad-client="ca-pub-2035820168336712"
                 data-ad-slot="7936913033"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>

        </section>

        <aside>

            <article class="box">
                <h3>Blog Categories</h3>
                <p style="margin-top: -1em; margin-bottom: 0.75em">The official Ozar blog covers tech topics such as</p>
                <ul class="divided">
                    <li>
                        <a class="section-title" href="/ozarnetstaticweb/blog/dealing-with-databases">
                        </a>
                    </li>
                    <li>
                        <a class="section-title" href="/ozarnetstaticweb/blog/web-development-php/codeigniter">
                            <strong> CodeIgniter </strong> </a>
                    </li>
                    <li>
                        <a class="section-title" href="/ozarnetstaticweb/blog/development-on-macos">
                            Development on macOS                        </strong>                    </a>
                    </li>
                    <li>
                        <a class="section-title" href="/ozarnetstaticweb/blog/mac-apps">
                            Mac Apps                        </strong>                    </a>
                    </li>
                    <li>
                        <a class="section-title" href="/ozarnetstaticweb/blog/web-development-php">
                            PHP                        </strong>                    </a>
                    </li>
                    <li>
                        <a class="section-title" href="/ozarnetstaticweb/blog/tech-books">
                            Tech Books                        </strong>                    </a>
                    </li>
                    <li>
                        <a class="section-title" href="/ozarnetstaticweb/blog/web-development-php">
                            Web Development                        </strong>                    </a>
                    </li>
                </ul>
                <footer>
                    <a href="/ozarnetstaticweb/blog" title="Ozar Blog" class="button-sm">See All »</a>
                </footer>
            </article>

            <article class="box">
                <script async
                        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2035820168336712"
                        crossorigin="anonymous"></script>
                <!-- OzarNetBlogSidebar -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-2035820168336712"
                     data-ad-slot="4836370304"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </article>

            <article class="box">

                <h3>Recent News and Articles</h3>

                <p style="margin-top: -1em; margin-bottom: 0.75em">From our latest stories, news, and tutorials...</p>
                <ul class="divided">
                    <li>
                        <a class="section-title"
                           href="/ozarnetstaticweb/blog/web-development-php/codeigniter/how-to-migrate-ci3-to-ci4"
                           title="CodeIgniter-related articles and tutorials - How to Migrate CodeIgniter 3 to CodeIgniter 4:">
                            Migrating CI3 to CI4</a>
                    </li>
                    <li>
                        <a class="section-title"
                           href="/ozarnetstaticweb/blog/web-development-php/codeigniter/difference-between-entities-and-models-in-codeigniter4"
                           title="CodeIgniter-related articles and tutorials - The Difference between Entities and Models in CodeIgniter 4.x">
                            Entities vs Models in CI4</a>
                    </li>
                    <li>
                        <a class="section-title"
                           href="/ozarnetstaticweb/blog/web-development-php/codeigniter/wizard2-is-here"
                           title="CodeIgniter-related articles and tutorials - CodeIgniter Wizard 2 Is Here">
                            CodeIgniter Wizard 2 Is Here</a>
                    </li>
                    <li>
                        <a class="section-title"
                           href="/ozarnetstaticweb/blog/web-development-php/codeigniter/ci4-production-deployment"
                           title="A Step-by-Step Guide on How to Deploy CodeIgniter 4 Projects to Production">
                            Deploying Your CI 4 app to Production</a>
                    </li>

                    <li>
                        <a class="section-title"
                           href="/ozarnetstaticweb/blog/mac-apps/parallel-search-now-speaks-french"
                           title="Mac Apps - Parallel Search now speaks French">
                            Parallel Search in French</a>
                    </li>

                    <li>
                        <a class="section-title" href="/ozarnetstaticweb/blog/mac-apps/introducing-parallel-search"
                           title="Mac Apps - Introducing Parallel Search Deluxe for Mac">
                            Introducing Parallel Search</a>
                    </li>
                    <li>
                        <a class="section-title"
                           href="/ozarnetstaticweb/blog/web-development-php/how-to-install-php8-macos-big-sur-with-homebrew"
                           title="Web Development / PHP - How to Install PHP 8 to macOS Using Homebrew">
                            Install PHP 8 on macOS w/Homebrew</a>
                    </li>

                    <li>
                        <a class="section-title"
                           href="/ozarnetstaticweb/blog/tech-books/beginning-coding-with-javascript-interactive-book-published-in-turkish"
                           title="Tech Books - Beginning Coding and Programming with JavaScript">
                            Beginning Coding and Programming JS</a>
                    </li>
                </ul>
            </article>


            <article class="box">
                <script async
                        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2035820168336712"
                        crossorigin="anonymous"></script>
                <!-- OzarNetBlogSidebar -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-2035820168336712"
                     data-ad-slot="4836370304"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </article>


        </aside>
    </div>
</main>
<!-- ./ Main -->

<!-- SVG Icons -->
<svg xmlns="http://www.w3.org/2000/svg" fill="white" style="display: none;">
    <symbol id="twitterIcon" class="bi-twitter" viewBox="0 0 24 24">
        <path
                d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
    </symbol>
    <symbol id="youtubeIcon" class="bi-youtube" viewBox="0 0 24 24">
        <path
                d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/>
    </symbol>
</svg>

<!-- Footer -->
<footer id="footer" class="container">
    <div class="grid">
        <div class="col">
            <section>

                <h3 class="footer-subtopic">Recent Insights, News or Tutorials</h3>

                <ul class="dates">
                    <li>
                        <small><span class="date"><strong>09 Jul 2023</strong></span></small>
                        <h4 style="margin-bottom: 0.1em; font-size: 1.1em"><a
                                href="/ozarnetstaticweb/blog/web-development-php/codeigniter/how-to-migrate-ci3-to-ci4"
                                title="CodeIgniter-related articles and tutorials - How to Migrate CodeIgniter 3 to CodeIgniter 4:">How
                            to Migrate a CodeIgniter 3 App to CodeIgniter 4</a></h4>
                        <p style="margin-top: 0.1em">This guide details migrating from CodeIgniter3 to CodeIgniter4
                            using a `Book` example and introduces the CodeIgniter Wizard tool for automated code
                            generation.</p>
                    </li>
                    <li>
                        <small><span class="date"><strong>26 Mar 2023</strong></span></small>
                        <h4 style="margin-bottom: 0.1em; font-size: 1.1em"><a
                                href="/ozarnetstaticweb/blog/web-development-php/codeigniter/difference-between-entities-and-models-in-codeigniter4"
                                title="CodeIgniter-related articles and tutorials - The Difference between Entities and Models in CodeIgniter 4.x">The
                            Difference Between Entities and Models in CodeIgniter4.x</a></h4>
                        <p style="margin-top: 0.1em">Learn the difference between entities and models in CodeIgniter 4.x
                            and how they are distinct from other programming frameworks.</p>
                    </li>
                    <li>
                        <small><span class="date"><strong>03 Sep 2022</strong></span></small>
                        <h4 style="margin-bottom: 0.1em; font-size: 1.1em"><a
                                href="/ozarnetstaticweb/blog/web-development-php/codeigniter/wizard2-is-here"
                                title="CodeIgniter-related articles and tutorials - CodeIgniter Wizard 2 Is Here">CodeIgniter
                            Wizard 2 Is Here</a></h4>
                        <p style="margin-top: 0.1em">CodeIgniter Wizard 2 has been released with lots of new features
                            added like auth, i18n, file uploads, automatic image resizing, auto-generation of
                            slugs...</p>
                    </li>
                </ul>
            </section>
        </div><!-- // .col -->

        <div class="col">
            <section>
                <h3 class="footer-subtopic">Related Websites</h3>

                <ul class="divided">
                    <li><a href="https://www.ozar.net/products/codeigniterwizard/?ref=tld">CodeIgniter Wizard's
                        Dedicated
                        Website</a></li>
                    <li><a href="https://gozmosis.blogspot.com">GOZmosis Blog</a></li>

                </ul>
            </section>

            <section>

                <h3 class="footer-subtopic">Other Sites on Ozar.net</h3>

                <ul class="divided">
                    <li><a href="https://maclord.ozar.net/?ref=tld">Maclord - tips and tricks on using Apple
                        products</a></li>
                    <li><a href="https://devblog.ozar.net/?ref=tld">Ozar.net Developer Blog (is back)</a></li>
                </ul>
            </section>

            <section>

                <h3 class="footer-subtopic">Ozar also on</h3>

                <p>Social Networks like</p>


                <a class="icon go-twitter" href="https://twitter.com/ozarnet">
                    <svg class="bi-twitter2" width="60" height="60" fill="white">
                        <use xlink:href="#twitterIcon"/>
                    </svg>
                    <span class="label">Twitter</span>
                </a>
                &nbsp; | &nbsp;
                <a class="icon go-youtube"
                   href="https://www.youtube.com/@ozardigital">
                    <svg class="bi-youtube2" width="60" height="60" fill="white"
                         style="margin-left: 0.3475em; margin-top: 0.35em;">
                        <use xlink:href="#youtubeIcon"/>
                    </svg>
                    <span class="label">YouTube</span>
                </a>


            </section>
        </div>
    </div><!-- // .grid -->
    <section id="copyright">
        <nav class="container-fluid flex-nav">
            <small>
                <ul class="links">
                    <li>&copy; 2017-2024 by Ozar. All rights reserved.</li>
                    <li><a href="/ozarnetstaticweb/privacy">Privacy Policy</a></li>
                    <li><a href="/ozarnetstaticweb/terms">Terms of Use</a></li>
                    <li><a href="/ozarnetstaticweb/disclaimer">Disclaimer</a></li>

                    <li>Website CMS powered by <a href="/ozarnetstaticweb/products">CodeIgniter Wizard</a></li>

                </ul>
            </small>
        </nav>
    </section>
</footer>
<!-- Minimal theme switcher -->
<script href="/ozarnetstaticweb/betik/minimal-theme-switcher.js" defer></script>

<script href="/ozarnetstaticweb/assets/js/jquery.min.js"></script>

<script type="module">

    var andac = '5d1b9eab65a10558cf1eb38ea9e26cb4';

    function webpSupported() {
        let elem = document.createElement('canvas');

        if (!!(elem.getContext && elem.getContext('2d'))) {
// was able or not to get WebP representation
            return elem.toDataURL('image/webp').indexOf('data:image/webp') == 0;
        } else {
// very old browser like IE 8, canvas not supported
            return false;
        }
    }

    function checkWebp(feature) {
        var kTestImages = {
            lossy: "UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",
            lossless: "UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",
            alpha: "UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",
            animation: "UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"
        };
        const img = new Image();
        return new Promise(function (resolve, reject) {
            img.onload = function () {
                resolve((img.width > 0) && (img.height > 0));
            };
            img.onerror = function () {
                reject(feature + ' not supported');
            };
            img.src = "data:image/webp;base64," + kTestImages[feature];
        });
    }

    document.getElementById('nav-icon').addEventListener('click', function () {
        this.classList.toggle('open');
        document.getElementById('nav-links').classList.toggle('open');
    });

    document.addEventListener('DOMContentLoaded', function () {

        let webSupported = webpSupported();
        if (!webSupported) {
            checkWebp('lossy').then(function (supported) {
                webSupported = true;
                console.log("webp is supported alright!")
            }, function () {
                webSupported = false;
                console.log("webp is not supported by your browser.")
            });
        }

        const hero = document.querySelector('.hero');

        const htmlElement = document.querySelector('html');
        if (!webpSupported) {

            const imageUrl = htmlElement && htmlElement.getAttribute('data-theme') === 'light' ? '/res/pexels-bongkarn-thanyakij-3759098.jpg' : '/res/pexels-bongkarn-thanyakij-darker.jpg';
            /*
            if (htmlElement && htmlElement.getAttribute('data-theme') === 'light') {
            imageUrl = '/res/pexels-bongkarn-thanyakij-3759098.jpg';
            } */
            if (hero) {
                hero.style.backgroundImage = "url(" + imageUrl + ")";
            }
        }
    });


    var probFld = null;
    var commentFormIsValid = false;
    var andac = '5d1b9eab65a10558cf1eb38ea9e26cb4';

    function bringReplyFormForComment(cid) {
        const yorum = {
            'ozarandac': andac,
            'yid': cid,
            'makale': 'ci4-production-deployment',
            'dil': 'en'
        }
        $.ajax({
            type: 'POST',
            url: '/upa/blog-comments/alt-yorum-formu',
            dataType: 'html',
            data: yorum,
            success: function (cevap) {
                $('.visible-sub-comment').empty();
                $('#commentReply' + cid).html(cevap);
                const andacit = 'input[name="ozarandac"]';
                const andaci = $('.visible-sub-comment').find(andacit);

                andac = andaci.val();
            }
        });
    }


    $(document).ready(function () {

        $(".comment-right").on("click", "form.visible-sub-comment button.button-cancel", function () {
            $('form.visible-sub-comment').remove();
        });

        function animasyonuBaslat() {
            $('#cSubmitter').after('<img id="loading" href="/ozarnetstaticweb/res/loading.gif" style="display: block; float: right">');
        }

        function animasyonuDurdur() {
            $('#loading').fadeOut('slow').remove();
        }

        let idSuffix = '';

        function commentFormIsValidWith(fields = [], theForm = null) {
            if (theForm == undefined || theForm == null) {
                theForm = $('#commentForm');
            }
            if (!Array.isArray(fields) || fields.length === 0) {
                if (theForm.length) {
                    // fields = theForm.find(':input'); // çalışıyor except including submit button
                    fields = theForm.find(':input:not([type=button]):not([type=submit]):not([type=reset])');
                } else {
                    return false;
                }
            }

            let nrOfMissingReqs = 0;
            let allValid = true;
            let requiredExplanations = ['This entry is required.', 'This one is also required.', 'Well, this one\'s required, too.', 'This one as well.'];

            $(fields).each(function (i, ele) {
                let valid = true;
                let invalidMsg = '';
                if ($(ele).attr('type') !== 'url' && ele.name !== 'commenter_url' && $(ele).attr('type') !== 'hidden' && $(ele).attr('type') !== 'submit' && ele.name !== 'your_web_url') {
                    if ($(ele).val().length < 1) {
                        valid = false;
                        invalidMsg = requiredExplanations[nrOfMissingReqs];
                        nrOfMissingReqs++;
                    }
                    if (ele.name == 'commenter_name' && !ele.value.match(/^[A-zÀ-Ÿ\'\´\s-]*$/g)) {
                        valid = false;
                        invalidMsg = 'Please' + (invalidMsg.length > 1 ? ' also' : '') + ' enter valid first and last names consisting of only alphabetical letters.';
                    } else if (($(ele).attr('type') == 'email' || ele.name == 'commenter_email') && (ele.value.length < 5 || (ele.value.length > 4 && !isEmail(ele.value)))) {
                        valid = false;
                        invalidMsg += ' Please' + (invalidMsg.length > 1 ? ' also' : '') + ' enter a valid e-mail address.';
                    }
                } else if (($(ele).attr('type') == 'url' || ele.name == 'commenter_url') && (ele.value.length > 0 && !isUrlValid(ele.value))) {
                    valid = false;
                    invalidMsg += ' Please enter a valid web site address, or just leave it blank.';
                }
                if ($(ele).attr('type') == 'url' || ele.name == 'commenter_url') {
                    let [a, b, c, d, e] = [$(ele).attr('type') == 'url', ele.name == 'commenter_url', ele.value.length > 0, ele.value.length < 5, !isUrlValid(ele.value)];
                    const allRules4UrlFld = ((a || b) && (c && (d || e)));
                    if (allRules4UrlFld) {
                        valid = false;
                        invalidMsg += ' Please enter a valid web site address, or just leave it blank.';
                    }
                }

                if (valid == false) {
                    $(ele).addClass('invalid');
                    if ($(ele).hasClass('valid'))
                        $(ele).removeClass('valid');
                    const feedbackJqElem = $('#' + $(ele).attr('name') + 'Feedback');
                    if (feedbackJqElem === undefined || feedbackJqElem == null || feedbackJqElem.length == 0) {
                        const theFeedbackContent = '<p id="' + $(ele).attr('name') + 'Feedback" class="feedback-invalid">' + invalidMsg + '</p>';
                        $(ele).after(theFeedbackContent);
                    } else {
                        feedbackJqElem.html(invalidMsg);
                    }
                    $('#' + ele.name + 'valid_check_mark').remove();
                    allValid = false;
                } else {
                    if ($(ele).hasClass('invalid'))
                        $(ele).removeClass('invalid');
                    if ($(ele).val().length)
                        $(ele).addClass('valid');
                }
            });
            if ((allValid && fields.length > 2) || ($('#commenterName').hasClass('valid') && $('#commenterEmail').hasClass('valid') && $('#commentContent').hasClass('valid'))) {
                enableTheCommentForm();
            }
            return allValid;
        }

        function enableTheCommentForm() {
            commentFormIsValid = true;
            $('#cSubmitter').prop('disabled', false);
        }

        function disableTheCommentForm() {
            commentFormIsValid = false;
            $('#cSubmitter').prop('disabled', true);
        }

        function resetTheCommentForm() {
            const cf = document.getElementById('commentForm');
            if (cf !== undefined && cf !== null) {
                cf.reset()
            }
            /*
            const fields = $(cf).find(':input');
            $(fields).each(function(i, ele) {
                removeValidationFeedbackOf($(ele));
            });
            */
            $('.form-control').removeClass('valid');
            $('.fa-check').remove();
            $('.alert').remove();
            animasyonuDurdur();
        }

        function removeValidationFeedbackOf(ele) { // where ele must be jQ element
            ele.removeClass('invalid');
            const elead = ele.attr('name');
            $('#' + elead + 'Feedback').remove()
        }


        $('.form-control').on('input', function (e) {
            removeValidationFeedbackOf($(this));
            commentFormIsValidWith([$(this)]);
            if (this.name == 'content' && $(this).val().length > 1 && $("#commenterName").hasClass("valid") && $("#commenterEmail").hasClass("valid")) {
                enableTheCommentForm();
            } else {
                disableTheCommentForm();
            }
        });


        $('.form-control').blur(function () {
            const ele = this;
            const tName = ele.name;
            const what2validate = [this];
            if (commentFormIsValidWith(what2validate)) {

                const linvitem = $('#linvalid' + tName)
                if (linvitem !== undefined && linvitem != null && linvitem.length) {
                    linvitem.remove();
                }
                if ($(this).hasClass('valid') && $(this).val().length && $('#' + tName + 'valid_check_mark').length === 0) {
                    $(this).after('<i id="' + tName + 'valid_check_mark" class="fas fa-check input-icon-right"></i>');
                    // to counter edge case for textarea
                    if (tName == 'content') {
                        $('#' + tName + 'valid_check_mark').css('position', 'absolute');
                    }
                }
            }
        });


        $("#commentDiv").on('keydown', '#commentContent', function (e) {
            var keyCode = e.keyCode || e.which;

            if (keyCode == 9 && $('#commenterName').length) {
                e.preventDefault();
                $('#commenterName').focus();
            }
        });

        // $('.comment-form').submit(function (e) {
        $(document).on("submit", ".comment-form", function (e) {
            e.preventDefault();
            const theForm1 = $(this);
            const theForm2 = $(e.target);
            const theForm3 = e.target;
            const theForm4 = e.relatedTarget;
            const theForm = theForm2;
            const formValid = commentFormIsValidWith([], theForm);
            if (formValid) {

                animasyonuBaslat();
                disableTheCommentForm();

                let data = theForm.serializeArray();
                let pcid = theForm.find('input[name="parent_id"]').val();
                $.ajax({
                    type: "POST",
                    url: "/upa/blog-comments/create",
                    dataType: 'json',
                    data: data,
                    success: function (resp, textStatus, jqXHR) {
                        console.log('OK');
                    },
                    error: function (xhr, status, error) {
                        console.log('Err..');
                    }
                }).done((data, textStatus, jqXHR) => {
                    const successMsg = data.successMessage;
                    andac = data.andac;
                    $('input[name="ozarandac"]').val(data.andac);

                    resetTheCommentForm();
                    $('.visible-sub-comment').remove();

                    // $(this).closest('.button-cancel').after('<div class="alert alert-success"><span class="closebtn" onclick="this.parentElement.style.display=\'none\';">&times;</span>'+successMsg+'</div>');
                    const yeniCevap = '<div class="alert alert-success"><span class="closebtn" onclick="this.parentElement.style.display=\'none\';">&times;</span>' + successMsg + '</div>';
                    const yeniCevap2 = '';
                    $('#commentReply' + pcid).html(yeniCevap);

                }).fail((xhr, status, error) => {
                    if (xhr.responseJSON.messages != undefined) {
                        let meh = null;
                        $.each(xhr.responseJSON.messages, (item, msg) => {
                            if (item === 'formValidationErrorMessage') {
                                meh = msg;
                                $('#commentForm').prepend('<div class="alert alert-warning"><span class="closebtn" onclick="this.parentElement.style.display=\'none\';">&times;</span>' + msg + '</div>');

                            } else if (item === 'andac') {
                                andac = msg;
                                $('input[name="ozarandac"]').val(msg);
                            } else if (item === 'modelErrors') {
                                probFld = msg; // const probFld = msg; // JSON.parse(msg);
                                for (let key in probFld) {
                                    if (probFld.hasOwnProperty(key)) {
                                        const fld = theForm.find(':input[name="' + key + '"]');
                                        if (fld.length && fld.attr('type') !== 'hidden') {
                                            fld.addClass('invalid');
                                            fld.after('<p id="' + key + 'Feedback" class="feedback-invalid">' + probFld[key].replace('_', ' ') + '</p>');
                                        }
                                    }
                                }
                            }
                        });
                    } else {
                        $('#commentForm').append('<div id="unknownErr" class="alert alert-danger"><span class="closebtn" onclick="this.parentElement.style.display=\'none\';">&times;</span>Sorry, an unknown error has occurred.</div>');
                    }
                    animasyonuDurdur();
                }); // end fail
            } else { // form is not valid
                const msg = 'There is an issue in your post that need to be corrected before submission:';
                theForm.prepend('<div class="alert alert-warning"><span class="closebtn" onclick="this.parentElement.style.display=\'none\';">&times;</span>' + msg + '</div>');
            }

        }); // end submit

        $("#printArticle").on("click", function () {
            animasyonuBaslat();
            let theScript = document.createElement("script");
            theScript.setAttribute("src", "/assets/js/printThis.js");
            document.body.appendChild(theScript);
            setTimeout(function () {
                animasyonuDurdur();
                $(".box.post").printThis({importCSS: true,});
            }, 1000);
        });
    }); // end document ready


    export let probFld2 = probFld;


</script>


</body>
</html>
